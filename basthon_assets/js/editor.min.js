"use strict";window.editor=function(){let e=window.ace.edit("editor");return e.loadScript=async function(){const t=new URL(window.location.href);if(t.searchParams.has("script")){const o=t.searchParams.get("script");e.setValue(decodeURIComponent(o))}else if(t.searchParams.has("from")){let o,n=t.searchParams.get("from");n=decodeURIComponent(n);try{o=await Basthon.xhr({url:n,method:"GET"})}catch{throw{message:"Le chargement du script "+n+" a échoué.",name:"LoadingException"}}o&&e.setValue(o)}else"undefined"!=typeof localStorage&&"py_src"in localStorage?e.setValue(localStorage.py_src):e.setValue("for i in range(10):\n\tprint(i)");e.scrollToRow(0),e.gotoLine(0)},e.init=async function(){e.session.setMode("ace/mode/python"),e.focus(),e.setOptions({enableLiveAutocompletion:!0,highlightActiveLine:!1,highlightSelectedWord:!0,fontSize:"12pt"}),await e.loadScript()},e.download=function(t="script.py"){let o=e.getValue();o=o.replace(/\r\n|\r|\n/g,"\r\n");let n=new Blob([o],{type:"text/plain"}),a=document.createElement("a");a.download=t,a.href=window.URL.createObjectURL(n),a.target="_blank",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},e.open=function(t){return new Promise(function(o,n){const a=new FileReader;a.readAsText(t),a.onload=function(t){e.setValue(t.target.result),e.scrollToRow(0),e.gotoLine(0),o()},a.onerror=n})},e.sharingURL=function(){const t=e.getValue().replace(/\r\n|\r|\n/g,"\r\n"),o=new URL(window.location.href);o.hash="",o.searchParams.delete("from");const n=encodeURIComponent(t).replace(/\(/g,"%28").replace(/\)/g,"%29");return o.searchParams.set("script",n),o.href},e.backup=async function(){"undefined"!=typeof localStorage&&(localStorage.py_src=e.getValue())},e}();